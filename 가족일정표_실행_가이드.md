# 가족 일정표 — 변경된 내용으로 실행 가이드

변경된 프로그램(종료 시간 16시 처리, 헤더 고정, 메모, 일정 수정 옵션, DB 버전)을 **로컬** 또는 **Render**에서 실행하는 방법입니다.

---

## 1. 로컬에서 실행 (PC에서 테스트/사용)

### 1-1. 준비

1. **Python 3**가 설치되어 있어야 합니다.  
   - 명령 프롬프트에서 `python --version` 또는 `py --version`으로 확인.

2. **D:\Coding practice** 폴더로 이동한 뒤, 필요한 패키지를 설치합니다.

```bat
d:
cd "D:\Coding practice"
pip install -r requirements.txt
```

- DB 버전을 쓰는 경우 `requirements.txt`에 `sqlalchemy`, `psycopg2-binary`가 포함되어 있으면 그대로 설치됩니다.
- 로컬에서는 **DATABASE_URL**이 없으므로 **JSON 파일**(`family_pro_data.json`)에 저장됩니다.

### 1-2. 서버 실행

```bat
d:
cd "D:\Coding practice"
python family_app.py
```

또는:

```bat
py family_app.py
```

- 터미널에 `DB: JSON file` 또는 `DB: PostgreSQL` 같은 메시지와 함께  
  `Open: http://127.0.0.1:8080` 이 나오면 정상입니다.

### 1-3. 브라우저에서 열기

- 브라우저 주소창에 **http://127.0.0.1:8080** 입력 후 접속합니다.
- **ORGANIZING OUR FAMILY** 제목, 요일·날짜 헤더 고정, 메모 입력, 일정 수정(시간/일정명/메모) 등 변경된 내용이 적용된 화면이 보이면 됩니다.

### 1-4. 종료

- 서버를 실행한 명령 프롬프트 창에서 **Ctrl + C**로 종료합니다.

---

## 2. Render에서 실행 (클라우드 배포)

이미 Render에 웹 서비스를 만들어 두었다면, **변경된 코드를 GitHub에 푸시**하면 자동으로 재배포됩니다.

### 2-1. 변경 파일 확인

- `D:\Coding practice` 에서 다음이 반영되어 있어야 합니다.
  - **family_app.py** — DB 버전(종료 시간, 메모, 수정 API 포함)
  - **templates\index.html** — 헤더 고정, 메모 입력, 수정 모달(시간/메모)
  - **requirements.txt** — `flask`, `gunicorn`, `sqlalchemy`, `psycopg2-binary` 포함

### 2-2. GitHub에 푸시

**명령 프롬프트** 또는 **PowerShell**에서:

```bat
d:
cd "D:\Coding practice"
git add family_app.py requirements.txt templates/index.html
git status
git commit -m "Apply updates: end time, sticky header, memo, edit options"
git push origin main
```

- `main` 브랜치가 아닌 경우 해당 브랜치 이름으로 `git push origin <브랜치이름>` 합니다.

### 2-3. Render에서 확인

- Render 대시보드에서 해당 **웹 서비스**가 자동으로 재배포됩니다.
- **Logs**에서 빌드·시작 로그를 확인하고, 오류가 없으면 서비스 URL로 접속해 변경된 화면이 나오는지 확인합니다.

### 2-4. DB 사용 시 (일정 유지)

- **PostgreSQL**을 연결해 두었다면, 위와 같이 푸시만 해도 **DB 버전**으로 실행됩니다.
- PostgreSQL 연결 방법은 **가족일정표_DB적용_가이드.md**를 참고합니다.

---

## 3. 요약

| 실행 위치 | 할 일 |
|-----------|--------|
| **로컬 (PC)** | `pip install -r requirements.txt` → `python family_app.py` → 브라우저에서 http://127.0.0.1:8080 |
| **Render (클라우드)** | `git add` → `git commit` → `git push origin main` → Render 자동 재배포 후 URL 접속 |

로컬은 **JSON 파일**로, Render에 **DATABASE_URL**을 넣으면 **PostgreSQL**로 저장됩니다. 두 경우 모두 같은 `family_app.py`와 `index.html`이 사용되며, 변경된 내용(종료 시간, 헤더 고정, 메모, 일정 수정)이 그대로 반영됩니다.
